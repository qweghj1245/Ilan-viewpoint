{"version":3,"sources":["all.js"],"names":["map","initMap","hos","lat","lng","google","maps","Map","document","getElementById","center","zoom","styles","$","ajax","type","url","success","data","class1","Set","chooseClass","querySelector","forEach","item","Class1","undefined","add","Array","from","classList","str","i","length","innerHTML","marker","markers","pos","current","info","addEventListener","changClass","e","str2","setMap","filter","target","value","place","parseFloat","Position","PositionLat","PositionLon","position","title","Name","Marker","push","infowindow","InfoWindow","content","addListener","open","setPosition","latLng","close","OpenTime","Phone","Address","TicketInfo"],"mappings":"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","file":"all.js","sourcesContent":["// AIzaSyACrqtiPfVFjqaZgCqz4CFXrpLA_dxXBYs\n\nvar map;\nfunction initMap() {\n  const hos = { lat: 24.723245, lng: 121.789160 };\n  map = new google.maps.Map(document.getElementById('map'), {\n    center: hos,\n    zoom: 10,\n    styles: [\n      {\n        \"featureType\": \"administrative\",\n        \"elementType\": \"labels.text.fill\",\n        \"stylers\": [\n          {\n            \"color\": \"#444444\"\n          }\n        ]\n      },\n      {\n        \"featureType\": \"landscape\",\n        \"elementType\": \"all\",\n        \"stylers\": [\n          {\n            \"color\": \"#f2f2f2\"\n          }\n        ]\n      },\n      {\n        \"featureType\": \"poi\",\n        \"elementType\": \"all\",\n        \"stylers\": [\n          {\n            \"visibility\": \"off\"\n          }\n        ]\n      },\n      {\n        \"featureType\": \"road\",\n        \"elementType\": \"all\",\n        \"stylers\": [\n          {\n            \"saturation\": -100\n          },\n          {\n            \"lightness\": 45\n          }\n        ]\n      },\n      {\n        \"featureType\": \"road.highway\",\n        \"elementType\": \"all\",\n        \"stylers\": [\n          {\n            \"visibility\": \"simplified\"\n          }\n        ]\n      },\n      {\n        \"featureType\": \"road.arterial\",\n        \"elementType\": \"labels.icon\",\n        \"stylers\": [\n          {\n            \"visibility\": \"off\"\n          }\n        ]\n      },\n      {\n        \"featureType\": \"transit\",\n        \"elementType\": \"all\",\n        \"stylers\": [\n          {\n            \"visibility\": \"off\"\n          }\n        ]\n      },\n      {\n        \"featureType\": \"water\",\n        \"elementType\": \"all\",\n        \"stylers\": [\n          {\n            \"color\": \"#46bcec\"\n          },\n          {\n            \"visibility\": \"on\"\n          }\n        ]\n      }\n    ]\n  });\n\n  $.ajax({\n    type: \"GET\",\n    url: \"https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/YilanCounty?$format=JSON\",\n    success: function (data) {\n      let class1 = [];\n      let type = new Set();\n      const chooseClass = document.querySelector('#type');\n\n      data.forEach((item) => {\n        if (item.Class1 === undefined) {\n          return\n        } else {\n          type.add(item.Class1);\n        }\n      });\n      class1 = Array.from(type);\n      function classList() {\n        let str = '';\n        for (let i = 0; i < class1.length; i++) {\n          str += `<option value='${class1[i]}'>${class1[i]}</option>`;\n        }\n        chooseClass.innerHTML = str;\n      }\n      \n      classList();\n\n      \n      let marker; // 單一個值\n      let markers = []; // 存所有marker\n      let pos = [];\n      let current = '';\n      const info = document.querySelector('#info');\n      chooseClass.addEventListener('change', changClass);\n      function changClass(e) {\n        let str2 = '';\n        for (let i = 0; i < markers.length; i++) {\n          markers[i].setMap(null);\n        }\n        pos = data.filter((item) => {\n          return item.Class1 === e.target.value;\n        });\n        pos.forEach(item => {\n          const str = {};\n          const place = {};\n          place.lat = parseFloat(item.Position.PositionLat);\n          place.lng = parseFloat(item.Position.PositionLon);\n          str.map = map;\n          str.position = place;\n          str.title = item.Name;\n          marker = new google.maps.Marker(str);\n          markers.push(marker);\n          let infowindow = new google.maps.InfoWindow({\n            content: item.Name,\n          });\n\n          marker.addListener('click', function(e){\n            infowindow.open(map, marker);\n            infowindow.setPosition(e.latLng);\n            if (current != '') {\n              current.close();\n              current = '';\n            }\n            current = infowindow;\n          });\n\n          str2 += `\n          <tr>\n            <td>${item.Name}</td>\n            <td>${item.OpenTime}</td>\n            <td>${item.Phone}</td>\n            <td>${item.Address}</td>\n            <td class=\"d-md-table-cell d-none\">${item.TicketInfo}</td>\n          </tr>`;\n        });\n        info.innerHTML = str2;\n      }\n    },\n  });\n}"]}